# =============================================================================
# OpenPool Manager API — Production Environment (v0.8.9)
# =============================================================================
# Copy this file and fill in credentials before deploying.
# Used by: docker-compose-production.yml
# =============================================================================

# --- Docker Infrastructure ---
DOCKER_NETWORK=ingress
DOCKER_VOLUME=open-pool-mgmt-data

# --- S3 / Object Storage ---
AWS_ACCESS_KEY_ID=CHANGEME
AWS_SECRET_ACCESS_KEY=CHANGEME
S3_BUCKET=open-pool-events
S3_METRICS_BUCKET=open-pool-metrics
S3_ENDPOINT=http://minio:9000/
AWS_REGION=us-east-1

# S3 Archival — processed files are copied here on successful run
# Leave S3_ARCHIVE_BUCKET empty to disable archival
S3_ARCHIVE_BUCKET=open-pool-events-archive
S3_ARCHIVE_PREFIX=archive/

# --- Blockchain / Payments (Arbitrum) ---
ETH_RPC_ENDPOINT=https://arb1.arbitrum.io/rpc
ETH_PRIVATE_KEY=CHANGEME
ETH_KEYSTORE_PASSWORD=CHANGEME
MAX_GAS_PRICE_WEI=5000000000000
GAS_LIMIT=1000000
CHAIN_ID=42161

# --- Payment Processing ---
PAYMENT_THRESHOLD_WEI=10000000000000000
MIN_PAYMENT_INTERVAL_SECONDS=86400

# --- Pool Configuration ---
POOL_COMMISSION_RATE=0.25

# --- Task Processing ---
MAX_FILES_PER_BATCH=250
MAX_CONCURRENT_PROCESSES=5
S3_SENSOR_INTERVAL_SECONDS=120
PAYMENT_SENSOR_INTERVAL_SECONDS=3600

# --- IO / Storage Paths ---
IO_MANAGER_BASE_DIR=/pool/data

# --- PostgreSQL ---
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres
POSTGRES_HOST=dagster-postgres
POSTGRES_PORT=5432

# --- Dagster Core ---
DAGSTER_HOME=/opt/dagster/dagster_home
MAX_CONCURRENT_RUNS=5
DAGSTER_POSTGRES_USER=postgres
DAGSTER_POSTGRES_PASSWORD=postgres
DAGSTER_POSTGRES_DB=postgres
DAGSTER_POSTGRES_HOST=dagster-postgres
DAGSTER_DAEMON_HEARTBEAT_TOLERANCE_SECONDS=120
DAGSTER_RUN_COORDINATOR_TYPE=QueuedRunCoordinator
DAGSTER_RUN_COORDINATOR_MAX_CONCURRENT_RUNS=5
DAGSTER_COMPUTE_LOG_MANAGER_TYPE=LocalComputeLogManager
DAGSTER_COMPUTE_LOG_MANAGER_BASE_DIR=/opt/dagster/dagster_home/compute_logs
DAGSTER_RUN_LAUNCHER_TYPE=DefaultRunLauncher
DAGSTER_DISABLE_TELEMETRY=true
DAGSTER_CODE_SERVER_HOSTS=openpool_management
DAGSTER_CODE_SERVER_PORTS=4000
DAGSTER_CODE_SERVER_LOCATION_NAMES=openpool_management
